<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Past Websites | TREC Product Search and Recommendations Track</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Past Websites" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Advancing multimodal retrieval and recommendation methods for online product discovery experiences." />
<meta property="og:description" content="Advancing multimodal retrieval and recommendation methods for online product discovery experiences." />
<link rel="canonical" href="https://rikiyat.github.io/previous.html" />
<meta property="og:url" content="https://rikiyat.github.io/previous.html" />
<meta property="og:site_name" content="TREC Product Search and Recommendations Track" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Past Websites" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Advancing multimodal retrieval and recommendation methods for online product discovery experiences.","headline":"Past Websites","url":"https://rikiyat.github.io/previous.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='https://kit.fontawesome.com/cc765b5db3.js' crossorigin='anonymous'></script>
    <link rel="stylesheet" href="/assets/css/style.css?v=bd2aa5291a528b38b9c9084a958958e9d72dd835">
    <link rel="stylesheet" href="/assets/css/custom.css">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">TREC 2025 Product Search and Recommendations Track</h1>
      <h3 class="project-tagline"><i>Advancing multimodal retrieval and recommendation methods for online product discovery experiences.</i></h3>
      <a href="/index" class="btn">OVERVIEW</a>
      <a href="/organizers" class="btn">Organizers</a>
      <a href="/previous" class="btn">Previous editions</a>
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="past-websites">Past Websites</h1>
<ul>
<li>2024: <a href="2024.html">Website</a></li>
<li>2023: <a href="2024.html">Website</a></li>
</ul>
<h1 id="previous-data">Previous Data</h1>
<hr />
<h2 id="datasets">2024 Datasets</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>Filename</th>
<th>File Size</th>
<th>Num Records</th>
<th>Description</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr>
<td>Query to Query ID</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/Product-Search-Corpus-v0.1/resolve/main/data/qid2query.tsv">Query2QueryID</a></td>
<td>946 KB</td>
<td>30,734</td>
<td>TREC style QueryID to Query Text</td>
<td>tsv: qid, query</td>
</tr>
<tr>
<td>Collection</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/Product-Search-Corpus-v0.1/resolve/main/data/trec/collection.trec.gz">Collection (TREC Format)</a></td>
<td>1.81 GB (568 MB compressed)</td>
<td>1,661,907</td>
<td>TREC style corpus collection</td>
<td>tsv: docid, Title, Description</td>
</tr>
<tr>
<td>Train QREL (ESCI)</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/Product-Search-Qrels-v0.1/resolve/main/data/train/product-search-train.qrels.gz">Train QRELS (TREC Format)</a></td>
<td>6.8 MB (2.1 MB compressed)</td>
<td>392,119</td>
<td>Train QRELs</td>
<td>tsv: qid, 0, docid, relevance label</td>
</tr>
<tr>
<td>Dev QREL (ESCI)</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/Product-Search-Qrels-v0.1/resolve/main/data/dev/product-search-dev.qrels.gz">Dev QRELS (TREC Format)</a></td>
<td>2.9 MB (906 KB compressed)</td>
<td>169,952</td>
<td>Dev QRELs</td>
<td>tsv: qid, 0, docid, relevance label</td>
</tr>
<tr>
<td>Training Triples</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/Product-Search-Triples/resolve/main/train.jsonl.gz">Train Triples JSONl</a></td>
<td>6.23 GB (1.28 GB compressed)</td>
<td>20,888</td>
<td>Training Triples json format</td>
<td>json: qid, query, positive passages, negative passages</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="datasets-1">2023 Datasets</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>Filename</th>
<th>File Size</th>
<th>Num Records</th>
<th>Description</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr>
<td>Test Queries</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/product-search-2023-queries">2023 Test Queries (TREC Format)</a></td>
<td>12 KB (7 KB compressed)</td>
<td>186</td>
<td>2023 Test Queries</td>
<td>tsv: qid, query text</td>
</tr>
<tr>
<td>Test QREL Synthetic (Non NIST)</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/Product-Search-Qrels-v0.1/blob/main/data/test/product-search-test.qrels.gz">2023 Test QREL Synthetic (Non NIST)</a></td>
<td>18 KB (6 KB compressed)</td>
<td>998</td>
<td>2023 Test QREL Synthetic (Non NIST)</td>
<td>tsv: qid, 0, docid, relevance label</td>
</tr>
<tr>
<td>Test QRELS (NIST Judged)</td>
<td><a href="https://huggingface.co/datasets/trec-product-search/product-search-2023-queries">2023 Test QREL (TREC Format)</a></td>
<td>2.1 MB (460 KB compressed)</td>
<td>115,490</td>
<td>2023 Test Qrels</td>
<td>tsv: qid, 0, docid, relevance label</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="getting-startedtevatron-usage">Getting Started/Tevatron Usage</h2>
<p>To allow quick experimentation, we have made the datasets compatible with the popular <a href="https://github.com/texttron/tevatron/">Tevatron</a> library. To train, index, and retrieve from the product search, researchers can take the <a href="https://github.com/texttron/tevatron/blob/main/examples/example_msmarco.md">Tevatron MSMARCO Example Guide</a>, update the dataset names, and run with their favorite model variant. For simplicity, an example is shown below.</p>
<h3 id="steps">Steps</h3>
<ol>
<li>
<p><strong>Train a Model</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> tevatron.driver.train <span class="se">\</span>
    <span class="nt">--output_dir</span> product_search_bi_encoder_baseline <span class="se">\</span>
    <span class="nt">--model_name_or_path</span> bert-base-uncased <span class="se">\</span>
    <span class="nt">--dataset_name</span> trec-product-search/Product-Search-Triples
</code></pre></div></div>
</li>
<li>
<p><strong>Encode the Corpus</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> tevatron.driver.encode <span class="se">\</span>
    <span class="nt">--output_dir</span><span class="o">=</span>temp <span class="se">\</span>
    <span class="nt">--model_name_or_path</span> product_search_bi_encoder_baseline <span class="se">\</span>
    <span class="nt">--dataset_name</span> trec-product-search/product-search-corpus <span class="se">\</span>
    <span class="nt">--encoded_save_path</span> corpus_emb.pkl <span class="se">\</span>
    <span class="nt">--encode_num_shard</span> 1 <span class="se">\</span>
    <span class="nt">--encode_shard_index</span> 0
</code></pre></div></div>
</li>
<li>
<p><strong>Create Query Embeddings for 2023 Queries</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> tevatron.driver.encode <span class="se">\</span>
    <span class="nt">--output_dir</span><span class="o">=</span>temp <span class="se">\</span>
    <span class="nt">--model_name_or_path</span> product_search_bi_encoder_baseline <span class="se">\</span>
    <span class="nt">--dataset_name</span> trec-product-search/Product-Search-Triples/test <span class="se">\</span>
    <span class="nt">--encoded_save_path</span> query_emb.pkl <span class="se">\</span>
    <span class="nt">--q_max_len</span> 32 <span class="se">\</span>
    <span class="nt">--encode_is_qry</span>
</code></pre></div></div>
</li>
<li>
<p><strong>Retrieve Top Results</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> tevatron.faiss_retriever <span class="se">\</span>
    <span class="nt">--query_reps</span> query_emb.pkl <span class="se">\</span>
    <span class="nt">--passage_reps</span> corpus_emb.pkl <span class="se">\</span>
    <span class="nt">-depth</span> 100 <span class="se">\</span>
    <span class="nt">--batch_size</span> <span class="nt">-1</span> <span class="se">\</span>
    <span class="nt">--save_text</span> <span class="se">\</span>
    <span class="nt">--save_ranking_to</span> run.txt
</code></pre></div></div>
</li>
<li>
<p><strong>Convert Ranking to TREC Format</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> tevatron.utils.format.convert_result_to_trec <span class="se">\</span>
    <span class="nt">--input</span> run.txt <span class="se">\</span>
    <span class="nt">--output</span> run.trec
</code></pre></div></div>
</li>
<li>
<p><strong>Evaluate with TREC Eval or ir_measures</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ir_measures product_qrel.trec run.trec <span class="se">\</span>
    NDCG@1 NDCG@3 NDCG@5 NDCG@10 NDCG@100 NDCG@1000 <span class="se">\</span>
    AP@1 AP@3 AP@5 AP@10 AP@100 AP@1000

</code></pre></div></div>
</li>
</ol>


      <footer class="site-footer">
      </footer>
    </main>
  </body>
</html>
